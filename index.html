<!DOCTYPE html>
<html>
<head>
<title>Prime Tube</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0f0f0f;
  --card:#1c1c1c;
  --text:white;
  --accent:#ff0000;
}

body{
  margin:0;
  font-family:Arial;
  background:var(--bg);
  color:var(--text);
  transition:0.3s;
}

/* Light Mode */
.light-mode{
  --bg:#f4f4f4;
  --card:white;
  --text:black;
}

/* Header */
header{
  background:var(--card);
  padding:12px;
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}

.header-controls{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}

input{
  padding:8px;
  border:none;
  border-radius:6px;
}

button{
  padding:8px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:var(--accent);
  color:white;
}

.mode-btn{
  background:#007bff;
}

/* Video Grid */
#videos{
  display:grid;
  gap:15px;
  padding:15px;
}

/* Desktop Mode */
.desktop-mode #videos{
  grid-template-columns:repeat(4,1fr);
}

/* Mobile Mode */
.mobile-mode #videos{
  grid-template-columns:repeat(1,1fr);
}

.video-card{
  background:var(--card);
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 2px 10px rgba(0,0,0,0.4);
  cursor:pointer;
}

.video-card img{
  width:100%;
}

.video-card p{
  padding:8px;
  font-size:14px;
}

/* Modal */
#videoModal{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.9);
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:9999;
}

#videoModal iframe{
  width:90%;
  height:60%;
  border-radius:10px;
}

.close-btn{
  margin-top:15px;
  background:red;
}

/* Welcome Popup */
#welcomePopup{
  position:fixed;
  top:15px;
  right:15px;
  background:#111;
  padding:12px 18px;
  border-radius:8px;
  box-shadow:0 0 15px #00ffcc;
  display:none;
  z-index:9999;
}

/* Login */
#loginSection{
  text-align:center;
  margin-top:120px;
}

</style>
</head>

<body class="desktop-mode">

<div id="loginSection">
  <h2>Prime Tube Login</h2>
  <input type="email" id="email" placeholder="Email"><br><br>
  <input type="password" id="password" placeholder="Password"><br><br>
  <button id="signupBtn">Sign Up</button>
  <button id="loginBtn">Login</button>
</div>

<div id="mainContent" style="display:none;">

<header>
  <h2>Prime Tube</h2>
  <div class="header-controls">
    <input type="text" id="searchInput" placeholder="Search...">
    <button onclick="searchVideos()">Search</button>
    <button class="mode-btn" onclick="setMobileMode()">Mobile Mode</button>
    <button class="mode-btn" onclick="setDesktopMode()">Desktop Mode</button>
    <button onclick="toggleMode()">Light/Dark</button>
    <button id="logoutBtn">Logout</button>
  </div>
</header>

<div id="welcomePopup"></div>
<div id="videos"></div>

</div>

<!-- Video Modal -->
<div id="videoModal">
  <iframe id="modalIframe" allowfullscreen></iframe>
  <button class="close-btn" onclick="closeModal()">Close</button>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { 
  getAuth, 
  createUserWithEmailAndPassword, 
  signInWithEmailAndPassword, 
  onAuthStateChanged, 
  signOut
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAJ5A3fVLjRCRtO4nyphy7j7NtgEKWYAd8",
  authDomain: "prime-tube-65695.firebaseapp.com",
  projectId: "prime-tube-65695",
  storageBucket: "prime-tube-65695.appspot.com",
  messagingSenderId: "427524700832",
  appId: "1:427524700832:web:3b6a0b8f843514c9bee7c5"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

const loginSection = document.getElementById("loginSection");
const mainContent = document.getElementById("mainContent");
const welcomePopup = document.getElementById("welcomePopup");
const videos = document.getElementById("videos");

document.getElementById("signupBtn").onclick = async () => {
  await createUserWithEmailAndPassword(auth,email.value,password.value);
};

document.getElementById("loginBtn").onclick = async () => {
  await signInWithEmailAndPassword(auth,email.value,password.value);
};

document.getElementById("logoutBtn").onclick = async () => {
  await signOut(auth);
};

onAuthStateChanged(auth,(user)=>{
  if(user){
    loginSection.style.display="none";
    mainContent.style.display="block";
    showWelcome(user);
    loadRecommended();
  }else{
    loginSection.style.display="block";
    mainContent.style.display="none";
  }
});

/* Welcome */
function showWelcome(user){
  welcomePopup.innerHTML=`ðŸ‘‹ Welcome ${user.email}`;
  welcomePopup.style.display="block";
  setTimeout(()=>{welcomePopup.style.display="none";},4000);
}

/* Light/Dark */
window.toggleMode=function(){
  document.body.classList.toggle("light-mode");
};

/* View Modes */
window.setMobileMode=function(){
  document.body.classList.remove("desktop-mode");
  document.body.classList.add("mobile-mode");
};

window.setDesktopMode=function(){
  document.body.classList.remove("mobile-mode");
  document.body.classList.add("desktop-mode");
};

/* YouTube */
const YOUTUBE_API_KEY="AIzaSyB7XGItFXkRNsc_X6zmz8UnF5UyIkhL9cw";

async function loadRecommended(){
  searchVideos("trending hindi songs 2026");
}

window.searchVideos=async function(query){
  query=query||searchInput.value;
  if(!query)return;

  const res=await fetch(
    `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=12&q=${encodeURIComponent(query)}&regionCode=IN&key=${YOUTUBE_API_KEY}`
  );

  const data=await res.json();
  videos.innerHTML="";

  data.items.forEach(item=>{
    if(!item.id.videoId) return;

    videos.innerHTML+=`
      <div class="video-card" onclick="openModal('${item.id.videoId}')">
        <img src="${item.snippet.thumbnails.medium.url}">
        <p>${item.snippet.title}</p>
      </div>
    `;
  });
};

/* Modal */
window.openModal=function(videoId){
  document.getElementById("videoModal").style.display="flex";
  document.getElementById("modalIframe").src=
    "https://www.youtube.com/embed/"+videoId+"?autoplay=1";
};

window.closeModal=function(){
  document.getElementById("videoModal").style.display="none";
  document.getElementById("modalIframe").src="";
};

</script>

</body>
</html>
